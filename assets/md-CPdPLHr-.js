import{r as i,b as E,o as r,w as T,g as u,i as d,f as p,n as g,t as x,F,al as L,k as m,v as B,x as I,T as _}from"./modules/vue-D3_mjchr.js";import{_ as O}from"./default-C69QFb8w.js";import{_ as P,J as $,am as D,al as N}from"./index-CHIVUnn5.js";import"./modules/shiki-CGdFOZnS.js";const q={class:"slidev-layout default"},R={key:0,class:"mt-8 flex flex-wrap gap-3 justify-center items-stretch",style:{"max-width":"100%"}},z=["onClick","disabled"],j={key:1,class:"mt-8 text-xl text-red-600"},b="https://script.google.com/macros/s/AKfycbye3kDgEZcBnyl-bK09cbmRmxFpueFdVi43gQv92EWP8wL1soKtq-B913_F_XhiJOZLAg/exec",A={__name:"slides.md__slidev_18",setup(J){const{$clicksContext:w,$frontmatter:S}=$();w.setup();const y=new BroadcastChannel("table-topics-timer"),s=i([]),o=i("Waiting for slide to load..."),l=i("info"),n=i(!1),c=i(null),f=i({x:0,y:0});async function k(){n.value=!0,o.value="Fetching speaker list...",l.value="info";try{const a=await(await fetch(`${b}?path=options`)).json();a.status==="success"&&a.options?.length?(s.value=a.options,o.value="Options loaded successfully.",l.value="success"):(o.value=a.message||"No speakers found.",l.value="error")}catch(e){o.value=`Error fetching data: ${e.message}`,l.value="error"}finally{n.value=!1}}async function C(e,a){const t=a.target.getBoundingClientRect(),v={x:t.left+t.width/2,y:t.top+t.height/2};y.postMessage({type:"DISQUALIFY",speaker:e,position:v}),h(e,v)}async function h(e,a){f.value=a,c.value=e,n.value=!0,o.value=`Disqualifying ${e}...`,l.value="info";try{fetch(b,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"delete",speaker:e}),mode:"no-cors"}).catch(()=>{}),await new Promise(t=>setTimeout(t,1200)),s.value=s.value.filter(t=>t!==e),c.value=null,o.value=`Successfully disqualified ${e}. ðŸ’¥`,l.value="success"}catch(t){c.value=null,o.value=`Error disqualifying speaker: ${t.message}`,l.value="error"}finally{n.value=!1}}return D(()=>{s.value=[],k(),y.onmessage=e=>{e.data.type==="DISQUALIFY"&&h(e.data.speaker,e.data.position)}}),(e,a)=>(r(),E(O,B(I(_(N)(_(S),17))),{default:T(()=>[u("div",q,[a[1]||(a[1]=u("h1",{class:"text-center"},"Timer's Report on Table Topics",-1)),d(" Status Message "),u("div",{class:g(["p-4 rounded-md mt-6",{"bg-blue-100 text-blue-800":l.value==="info","bg-green-100 text-green-800":l.value==="success","bg-red-100 text-red-800":l.value==="error"}])}," Status: "+x(o.value),3),d(" Speaker List "),s.value.length>0?(r(),p("div",R,[(r(!0),p(F,null,L(s.value,t=>(r(),p("div",{key:t,class:g(["flex flex-col items-center justify-between p-4 border border-gray-300 rounded-xl shadow-sm bg-white relative overflow-visible speaker-card",{exploding:c.value===t}]),style:m({flex:s.value.length<=4?"0 0 calc(50% - 0.75rem)":"0 0 calc(33.333% - 0.75rem)",minWidth:s.value.length>6?"180px":"220px",maxWidth:s.value.length<=2?"400px":s.value.length<=4?"350px":"300px"})},[u("span",{class:"text-center font-semibold mb-3",style:m({fontSize:s.value.length<=4?"1.25rem":s.value.length<=6?"1.125rem":"1rem"})},x(t),5),u("button",{onClick:v=>C(t,v),disabled:n.value,class:g(["rounded-lg text-white font-bold transition duration-150 ease-in-out w-full",{"bg-red-600 hover:bg-red-700":!n.value,"bg-gray-400 cursor-not-allowed":n.value}]),style:m({fontSize:s.value.length>6?"0.875rem":"1rem",padding:s.value.length>6?"0.5rem 0.75rem":"0.5rem 1.25rem"})}," ðŸ’£ Disqualify ",14,z)],6))),128))])):!n.value&&l.value==="error"?(r(),p("p",j," Could not load speaker options. Check your script URL and logs. ")):d("v-if",!0),d(" Explosion GIF Overlay "),c.value?(r(),p("div",{key:2,class:"explosion-overlay",style:m({left:f.value.x+"px",top:f.value.y+"px"})},[...a[0]||(a[0]=[u("img",{src:"https://media.giphy.com/media/X92pmIty2ZJp6/giphy.gif",alt:"Nuclear Explosion"},null,-1)])],4)):d("v-if",!0)])]),_:1},16))}},Q=P(A,[["__scopeId","data-v-acc93563"]]);export{Q as default};
